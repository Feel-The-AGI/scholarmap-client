{"version":3,"sources":["../../../../node_modules/.pnpm/next%4016.1.3_%40babel%2Bcore%407.2_c2a8aca3560c8fa3cc9921bef3dac580/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/.pnpm/next%4016.1.3_%40babel%2Bcore%407.2_c2a8aca3560c8fa3cc9921bef3dac580/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../node_modules/.pnpm/framer-motion%4012.26.2_react_9d0d8820b031a7727cbd2a877b464765/node_modules/framer-motion/src/components/AnimatePresence/utils.ts","../../../../node_modules/.pnpm/framer-motion%4012.26.2_react_9d0d8820b031a7727cbd2a877b464765/node_modules/framer-motion/src/utils/use-composed-ref.ts","../../../../node_modules/.pnpm/framer-motion%4012.26.2_react_9d0d8820b031a7727cbd2a877b464765/node_modules/framer-motion/src/components/AnimatePresence/PresenceChild.tsx","../../../../node_modules/.pnpm/framer-motion%4012.26.2_react_9d0d8820b031a7727cbd2a877b464765/node_modules/framer-motion/src/components/AnimatePresence/index.tsx","../../../../node_modules/.pnpm/framer-motion%4012.26.2_react_9d0d8820b031a7727cbd2a877b464765/node_modules/framer-motion/src/components/AnimatePresence/PopChild.tsx","../../../../src/app/onboarding/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","import { isValidElement, Children, ReactElement, ReactNode } from \"react\"\n\nexport type ComponentKey = string | number\n\nexport const getChildKey = (child: ReactElement<any>): ComponentKey =>\n    child.key || \"\"\n\nexport function onlyElements(children: ReactNode): ReactElement<any>[] {\n    const filtered: ReactElement<any>[] = []\n\n    // We use forEach here instead of map as map mutates the component key by preprending `.$`\n    Children.forEach(children, (child) => {\n        if (isValidElement(child)) filtered.push(child)\n    })\n\n    return filtered\n}\n","/**\n * Taken from https://github.com/radix-ui/primitives/blob/main/packages/react/compose-refs/src/compose-refs.tsx\n */\nimport * as React from \"react\"\n\ntype PossibleRef<T> = React.Ref<T> | undefined\n\n/**\n * Set a given ref to a given value\n * This utility takes care of different types of refs: callback refs and RefObject(s)\n */\nfunction setRef<T>(ref: PossibleRef<T>, value: T): void | (() => void) {\n    if (typeof ref === \"function\") {\n        return ref(value)\n    } else if (ref !== null && ref !== undefined) {\n        ;(ref as React.MutableRefObject<T>).current = value\n    }\n}\n\n/**\n * A utility to compose multiple refs together\n * Accepts callback refs and RefObject(s)\n */\nfunction composeRefs<T>(...refs: PossibleRef<T>[]): React.RefCallback<T> {\n    return (node) => {\n        let hasCleanup = false\n        const cleanups = refs.map((ref) => {\n            const cleanup = setRef(ref, node)\n            if (!hasCleanup && typeof cleanup === \"function\") {\n                hasCleanup = true\n            }\n            return cleanup\n        })\n        // React <19 will log an error to the console if a callback ref returns a\n        // value. We don't use ref cleanups internally so this will only happen if a\n        // user's ref callback returns a value, which we only expect if they are\n        // using the cleanup functionality added in React 19.\n        if (hasCleanup) {\n            return () => {\n                for (let i = 0; i < cleanups.length; i++) {\n                    const cleanup = cleanups[i]\n                    if (typeof cleanup === \"function\") {\n                        cleanup()\n                    } else {\n                        setRef(refs[i], null)\n                    }\n                }\n            }\n        }\n    }\n}\n\n/**\n * A custom hook that composes multiple refs\n * Accepts callback refs and RefObject(s)\n */\nfunction useComposedRefs<T>(...refs: PossibleRef<T>[]): React.RefCallback<T> {\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    return React.useCallback(composeRefs(...refs), refs)\n}\n\nexport { useComposedRefs }\n","\"use client\"\n\nimport * as React from \"react\"\nimport { useId, useMemo } from \"react\"\nimport {\n    PresenceContext,\n    type PresenceContextProps,\n} from \"../../context/PresenceContext\"\nimport { VariantLabels } from \"../../motion/types\"\nimport { useConstant } from \"../../utils/use-constant\"\nimport { PopChild } from \"./PopChild\"\n\ninterface PresenceChildProps {\n    children: React.ReactElement\n    isPresent: boolean\n    onExitComplete?: () => void\n    initial?: false | VariantLabels\n    custom?: any\n    presenceAffectsLayout: boolean\n    mode: \"sync\" | \"popLayout\" | \"wait\"\n    anchorX?: \"left\" | \"right\"\n    root?: HTMLElement | ShadowRoot\n}\n\nexport const PresenceChild = ({\n    children,\n    initial,\n    isPresent,\n    onExitComplete,\n    custom,\n    presenceAffectsLayout,\n    mode,\n    anchorX,\n    root\n}: PresenceChildProps) => {\n    const presenceChildren = useConstant(newChildrenMap)\n    const id = useId()\n\n    let isReusedContext = true\n    let context = useMemo((): PresenceContextProps => {\n        isReusedContext = false\n        return {\n            id,\n            initial,\n            isPresent,\n            custom,\n            onExitComplete: (childId: string) => {\n                presenceChildren.set(childId, true)\n\n                for (const isComplete of presenceChildren.values()) {\n                    if (!isComplete) return // can stop searching when any is incomplete\n                }\n\n                onExitComplete && onExitComplete()\n            },\n            register: (childId: string) => {\n                presenceChildren.set(childId, false)\n                return () => presenceChildren.delete(childId)\n            },\n        }\n    }, [isPresent, presenceChildren, onExitComplete])\n\n    /**\n     * If the presence of a child affects the layout of the components around it,\n     * we want to make a new context value to ensure they get re-rendered\n     * so they can detect that layout change.\n     */\n    if (presenceAffectsLayout && isReusedContext) {\n        context = { ...context }\n    }\n\n    useMemo(() => {\n        presenceChildren.forEach((_, key) => presenceChildren.set(key, false))\n    }, [isPresent])\n\n    /**\n     * If there's no `motion` components to fire exit animations, we want to remove this\n     * component immediately.\n     */\n    React.useEffect(() => {\n        !isPresent &&\n            !presenceChildren.size &&\n            onExitComplete &&\n            onExitComplete()\n    }, [isPresent])\n\n    if (mode === \"popLayout\") {\n        children = (\n            <PopChild isPresent={isPresent} anchorX={anchorX} root={root}>\n                {children}\n            </PopChild>\n        )\n    }\n\n    return (\n        <PresenceContext.Provider value={context}>\n            {children}\n        </PresenceContext.Provider>\n    )\n}\n\nfunction newChildrenMap(): Map<string, boolean> {\n    return new Map()\n}\n","\"use client\"\n\nimport * as React from \"react\"\nimport { useContext, useMemo, useRef, useState } from \"react\"\nimport { LayoutGroupContext } from \"../../context/LayoutGroupContext\"\nimport { useConstant } from \"../../utils/use-constant\"\nimport { useIsomorphicLayoutEffect } from \"../../utils/use-isomorphic-effect\"\nimport { PresenceChild } from \"./PresenceChild\"\nimport { AnimatePresenceProps } from \"./types\"\nimport { usePresence } from \"./use-presence\"\nimport { ComponentKey, getChildKey, onlyElements } from \"./utils\"\n\n/**\n * `AnimatePresence` enables the animation of components that have been removed from the tree.\n *\n * When adding/removing more than a single child, every child **must** be given a unique `key` prop.\n *\n * Any `motion` components that have an `exit` property defined will animate out when removed from\n * the tree.\n *\n * ```jsx\n * import { motion, AnimatePresence } from 'framer-motion'\n *\n * export const Items = ({ items }) => (\n *   <AnimatePresence>\n *     {items.map(item => (\n *       <motion.div\n *         key={item.id}\n *         initial={{ opacity: 0 }}\n *         animate={{ opacity: 1 }}\n *         exit={{ opacity: 0 }}\n *       />\n *     ))}\n *   </AnimatePresence>\n * )\n * ```\n *\n * You can sequence exit animations throughout a tree using variants.\n *\n * If a child contains multiple `motion` components with `exit` props, it will only unmount the child\n * once all `motion` components have finished animating out. Likewise, any components using\n * `usePresence` all need to call `safeToRemove`.\n *\n * @public\n */\nexport const AnimatePresence = ({\n    children,\n    custom,\n    initial = true,\n    onExitComplete,\n    presenceAffectsLayout = true,\n    mode = \"sync\",\n    propagate = false,\n    anchorX = \"left\",\n    root\n}: React.PropsWithChildren<AnimatePresenceProps>) => {\n    const [isParentPresent, safeToRemove] = usePresence(propagate)\n\n    /**\n     * Filter any children that aren't ReactElements. We can only track components\n     * between renders with a props.key.\n     */\n    const presentChildren = useMemo(() => onlyElements(children), [children])\n\n    /**\n     * Track the keys of the currently rendered children. This is used to\n     * determine which children are exiting.\n     */\n    const presentKeys =\n        propagate && !isParentPresent ? [] : presentChildren.map(getChildKey)\n\n    /**\n     * If `initial={false}` we only want to pass this to components in the first render.\n     */\n    const isInitialRender = useRef(true)\n\n    /**\n     * A ref containing the currently present children. When all exit animations\n     * are complete, we use this to re-render the component with the latest children\n     * *committed* rather than the latest children *rendered*.\n     */\n    const pendingPresentChildren = useRef(presentChildren)\n\n    /**\n     * Track which exiting children have finished animating out.\n     */\n    const exitComplete = useConstant(() => new Map<ComponentKey, boolean>())\n\n    /**\n     * Track which components are currently processing exit to prevent duplicate processing.\n     */\n    const exitingComponents = useRef(new Set<ComponentKey>())\n\n    /**\n     * Save children to render as React state. To ensure this component is concurrent-safe,\n     * we check for exiting children via an effect.\n     */\n    const [diffedChildren, setDiffedChildren] = useState(presentChildren)\n    const [renderedChildren, setRenderedChildren] = useState(presentChildren)\n\n    useIsomorphicLayoutEffect(() => {\n        isInitialRender.current = false\n        pendingPresentChildren.current = presentChildren\n\n        /**\n         * Update complete status of exiting children.\n         */\n        for (let i = 0; i < renderedChildren.length; i++) {\n            const key = getChildKey(renderedChildren[i])\n\n            if (!presentKeys.includes(key)) {\n                if (exitComplete.get(key) !== true) {\n                    exitComplete.set(key, false)\n                }\n            } else {\n                exitComplete.delete(key)\n                exitingComponents.current.delete(key)\n            }\n        }\n    }, [renderedChildren, presentKeys.length, presentKeys.join(\"-\")])\n\n    const exitingChildren: any[] = []\n\n    if (presentChildren !== diffedChildren) {\n        let nextChildren = [...presentChildren]\n\n        /**\n         * Loop through all the currently rendered components and decide which\n         * are exiting.\n         */\n        for (let i = 0; i < renderedChildren.length; i++) {\n            const child = renderedChildren[i]\n            const key = getChildKey(child)\n\n            if (!presentKeys.includes(key)) {\n                nextChildren.splice(i, 0, child)\n                exitingChildren.push(child)\n            }\n        }\n\n        /**\n         * If we're in \"wait\" mode, and we have exiting children, we want to\n         * only render these until they've all exited.\n         */\n        if (mode === \"wait\" && exitingChildren.length) {\n            nextChildren = exitingChildren\n        }\n\n        setRenderedChildren(onlyElements(nextChildren))\n        setDiffedChildren(presentChildren)\n\n        /**\n         * Early return to ensure once we've set state with the latest diffed\n         * children, we can immediately re-render.\n         */\n        return null\n    }\n\n    if (\n        process.env.NODE_ENV !== \"production\" &&\n        mode === \"wait\" &&\n        renderedChildren.length > 1\n    ) {\n        console.warn(\n            `You're attempting to animate multiple children within AnimatePresence, but its mode is set to \"wait\". This will lead to odd visual behaviour.`\n        )\n    }\n\n    /**\n     * If we've been provided a forceRender function by the LayoutGroupContext,\n     * we can use it to force a re-render amongst all surrounding components once\n     * all components have finished animating out.\n     */\n    const { forceRender } = useContext(LayoutGroupContext)\n\n    return (\n        <>\n            {renderedChildren.map((child) => {\n                const key = getChildKey(child)\n\n                const isPresent =\n                    propagate && !isParentPresent\n                        ? false\n                        : presentChildren === renderedChildren ||\n                          presentKeys.includes(key)\n\n                const onExit = () => {\n                    if (exitingComponents.current.has(key)) {\n                        return\n                    }\n                    exitingComponents.current.add(key)\n\n                    if (exitComplete.has(key)) {\n                        exitComplete.set(key, true)\n                    } else {\n                        return\n                    }\n\n                    let isEveryExitComplete = true\n                    exitComplete.forEach((isExitComplete) => {\n                        if (!isExitComplete) isEveryExitComplete = false\n                    })\n\n                    if (isEveryExitComplete) {\n                        forceRender?.()\n                        setRenderedChildren(pendingPresentChildren.current)\n\n                        propagate && safeToRemove?.()\n\n                        onExitComplete && onExitComplete()\n                    }\n                }\n\n                return (\n                    <PresenceChild\n                        key={key}\n                        isPresent={isPresent}\n                        initial={\n                            !isInitialRender.current || initial\n                                ? undefined\n                                : false\n                        }\n                        custom={custom}\n                        presenceAffectsLayout={presenceAffectsLayout}\n                        mode={mode}\n                        root={root}\n                        onExitComplete={isPresent ? undefined : onExit}\n                        anchorX={anchorX}\n                    >\n                        {child}\n                    </PresenceChild>\n                )\n            })}\n        </>\n    )\n}\n","\"use client\"\n\nimport { isHTMLElement } from \"motion-dom\"\nimport * as React from \"react\"\nimport { useContext, useId, useInsertionEffect, useRef } from \"react\"\n\nimport { MotionConfigContext } from \"../../context/MotionConfigContext\"\nimport { useComposedRefs } from \"../../utils/use-composed-ref\"\n\ninterface Size {\n    width: number\n    height: number\n    top: number\n    left: number\n    right: number\n}\n\ninterface Props {\n    children: React.ReactElement\n    isPresent: boolean\n    anchorX?: \"left\" | \"right\"\n    root?: HTMLElement | ShadowRoot\n}\n\ninterface MeasureProps extends Props {\n    childRef: React.RefObject<HTMLElement | null>\n    sizeRef: React.RefObject<Size>\n}\n\n/**\n * Measurement functionality has to be within a separate component\n * to leverage snapshot lifecycle.\n */\nclass PopChildMeasure extends React.Component<MeasureProps> {\n    getSnapshotBeforeUpdate(prevProps: MeasureProps) {\n        const element = this.props.childRef.current\n        if (element && prevProps.isPresent && !this.props.isPresent) {\n            const parent = element.offsetParent\n            const parentWidth = isHTMLElement(parent)\n                ? parent.offsetWidth || 0\n                : 0\n\n            const size = this.props.sizeRef.current!\n            size.height = element.offsetHeight || 0\n            size.width = element.offsetWidth || 0\n            size.top = element.offsetTop\n            size.left = element.offsetLeft\n            size.right = parentWidth - size.width - size.left\n        }\n\n        return null\n    }\n\n    /**\n     * Required with getSnapshotBeforeUpdate to stop React complaining.\n     */\n    componentDidUpdate() {}\n\n    render() {\n        return this.props.children\n    }\n}\n\nexport function PopChild({ children, isPresent, anchorX, root }: Props) {\n    const id = useId()\n    const ref = useRef<HTMLElement>(null)\n    const size = useRef<Size>({\n        width: 0,\n        height: 0,\n        top: 0,\n        left: 0,\n        right: 0,\n    })\n    const { nonce } = useContext(MotionConfigContext)\n    /**\n     * In React 19, refs are passed via props.ref instead of element.ref.\n     * We check props.ref first (React 19) and fall back to element.ref (React 18).\n     */\n    const childRef =\n        (children.props as { ref?: React.Ref<HTMLElement> })?.ref ??\n        (children as unknown as { ref?: React.Ref<HTMLElement> })?.ref\n    const composedRef = useComposedRefs(ref, childRef)\n\n    /**\n     * We create and inject a style block so we can apply this explicit\n     * sizing in a non-destructive manner by just deleting the style block.\n     *\n     * We can't apply size via render as the measurement happens\n     * in getSnapshotBeforeUpdate (post-render), likewise if we apply the\n     * styles directly on the DOM node, we might be overwriting\n     * styles set via the style prop.\n     */\n    useInsertionEffect(() => {\n        const { width, height, top, left, right } = size.current\n        if (isPresent || !ref.current || !width || !height) return\n\n        const x = anchorX === \"left\" ? `left: ${left}` : `right: ${right}`\n\n        ref.current.dataset.motionPopId = id\n\n        const style = document.createElement(\"style\")\n        if (nonce) style.nonce = nonce\n\n        const parent = root ?? document.head\n        parent.appendChild(style)\n\n        if (style.sheet) {\n            style.sheet.insertRule(`\n          [data-motion-pop-id=\"${id}\"] {\n            position: absolute !important;\n            width: ${width}px !important;\n            height: ${height}px !important;\n            ${x}px !important;\n            top: ${top}px !important;\n          }\n        `)\n        }\n\n        return () => {\n            if (parent.contains(style)) {\n                parent.removeChild(style)\n            }\n        }\n    }, [isPresent])\n\n    return (\n        <PopChildMeasure isPresent={isPresent} childRef={ref} sizeRef={size}>\n            {React.cloneElement(children as any, { ref: composedRef })}\n        </PopChildMeasure>\n    )\n}\n","\"use client\";\r\n\r\nimport { useState, useRef, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { useAuth } from \"@/lib/auth-context\";\r\nimport { createClient } from \"@/lib/supabase\";\r\n\r\n// SpeechRecognition type declaration\r\ninterface SpeechRecognitionEvent {\r\n  results: { [index: number]: { [index: number]: { transcript: string } } };\r\n}\r\n\r\ninterface SpeechRecognitionInstance {\r\n  continuous: boolean;\r\n  interimResults: boolean;\r\n  lang: string;\r\n  onresult: ((event: SpeechRecognitionEvent) => void) | null;\r\n  onerror: (() => void) | null;\r\n  onend: (() => void) | null;\r\n  start: () => void;\r\n  stop: () => void;\r\n}\r\n\r\ninterface Message {\r\n  role: \"user\" | \"assistant\";\r\n  content: string;\r\n  timestamp: string;\r\n}\r\n\r\ninterface ExtractedData {\r\n  full_name?: string;\r\n  nationality?: string;\r\n  country_of_residence?: string;\r\n  current_education_level?: string;\r\n  current_institution?: string;\r\n  graduation_year?: number;\r\n  gpa?: number;\r\n  target_degree?: string;\r\n  target_fields?: string[];\r\n  preferred_countries?: string[];\r\n  work_experience_years?: number;\r\n  languages?: { language: string; proficiency: string }[];\r\n  circumstances?: {\r\n    financial_need?: boolean;\r\n    refugee?: boolean;\r\n    disability?: boolean;\r\n    first_gen?: boolean;\r\n  };\r\n}\r\n\r\nconst INITIAL_MESSAGE = `Hey there! I'm Ada, your scholarship advisor. Let's chat for a couple of minutes so I can find the perfect scholarships for you.\r\n\r\nWhat's your name and where are you from?`;\r\n\r\nexport default function OnboardingPage() {\r\n  const { user, refreshUser } = useAuth();\r\n  const router = useRouter();\r\n  const supabase = createClient();\r\n  \r\n  const [messages, setMessages] = useState<Message[]>([\r\n    {\r\n      role: \"assistant\",\r\n      content: INITIAL_MESSAGE,\r\n      timestamp: new Date().toISOString(),\r\n    },\r\n  ]);\r\n  const [input, setInput] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [extractedData, setExtractedData] = useState<ExtractedData>({});\r\n  const [conversationStep, setConversationStep] = useState(0);\r\n  const [isListening, setIsListening] = useState(false);\r\n  const [voiceSupported, setVoiceSupported] = useState(false);\r\n  \r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n  const recognitionRef = useRef<SpeechRecognitionInstance | null>(null);\r\n\r\n  // Check for voice support\r\n  useEffect(() => {\r\n    if (typeof window !== \"undefined\" && (\"SpeechRecognition\" in window || \"webkitSpeechRecognition\" in window)) {\r\n      setVoiceSupported(true);\r\n    }\r\n  }, []);\r\n\r\n  // Auto-scroll to bottom\r\n  useEffect(() => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [messages]);\r\n\r\n  const startListening = () => {\r\n    if (!voiceSupported) return;\r\n    \r\n    const SpeechRecognitionClass = (window as { SpeechRecognition?: new () => SpeechRecognitionInstance; webkitSpeechRecognition?: new () => SpeechRecognitionInstance }).SpeechRecognition || \r\n      (window as { webkitSpeechRecognition?: new () => SpeechRecognitionInstance }).webkitSpeechRecognition;\r\n    if (!SpeechRecognitionClass) return;\r\n    \r\n    recognitionRef.current = new SpeechRecognitionClass();\r\n    recognitionRef.current.continuous = false;\r\n    recognitionRef.current.interimResults = false;\r\n    recognitionRef.current.lang = \"en-US\";\r\n\r\n    recognitionRef.current.onresult = (event: SpeechRecognitionEvent) => {\r\n      const transcript = event.results[0][0].transcript;\r\n      setInput(transcript);\r\n      setIsListening(false);\r\n    };\r\n\r\n    recognitionRef.current.onerror = () => {\r\n      setIsListening(false);\r\n    };\r\n\r\n    recognitionRef.current.onend = () => {\r\n      setIsListening(false);\r\n    };\r\n\r\n    recognitionRef.current.start();\r\n    setIsListening(true);\r\n  };\r\n\r\n  const stopListening = () => {\r\n    if (recognitionRef.current) {\r\n      recognitionRef.current.stop();\r\n      setIsListening(false);\r\n    }\r\n  };\r\n\r\n  const handleSend = async () => {\r\n    if (!input.trim() || loading) return;\r\n\r\n    const userMessage: Message = {\r\n      role: \"user\",\r\n      content: input.trim(),\r\n      timestamp: new Date().toISOString(),\r\n    };\r\n\r\n    setMessages((prev) => [...prev, userMessage]);\r\n    setInput(\"\");\r\n    setLoading(true);\r\n\r\n    try {\r\n      // Call the backend to process the message and extract data\r\n      const response = await fetch(\r\n        `${process.env.NEXT_PUBLIC_AGENT_URL}/onboarding/chat`,\r\n        {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({\r\n            messages: [...messages, userMessage],\r\n            current_step: conversationStep,\r\n            extracted_data: extractedData,\r\n          }),\r\n        }\r\n      );\r\n\r\n      if (!response.ok) throw new Error(\"Failed to get response\");\r\n\r\n      const data = await response.json();\r\n      \r\n      // Update extracted data\r\n      if (data.extracted_data) {\r\n        setExtractedData((prev) => ({ ...prev, ...data.extracted_data }));\r\n      }\r\n\r\n      // Add assistant response\r\n      const assistantMessage: Message = {\r\n        role: \"assistant\",\r\n        content: data.response,\r\n        timestamp: new Date().toISOString(),\r\n      };\r\n      setMessages((prev) => [...prev, assistantMessage]);\r\n      \r\n      // Update step\r\n      setConversationStep(data.next_step);\r\n\r\n      // Check if conversation is complete\r\n      if (data.is_complete) {\r\n        await saveProfile(data.extracted_data);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Chat error:\", error);\r\n      // Fallback: continue with simple flow\r\n      handleSimpleFlow(userMessage.content);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Simple fallback flow if API fails\r\n  const handleSimpleFlow = (userInput: string) => {\r\n    const step = conversationStep;\r\n    let response = \"\";\r\n    const newData: ExtractedData = { ...extractedData };\r\n\r\n    switch (step) {\r\n      case 0: // Name and nationality\r\n        const parts = userInput.split(/from|,/i);\r\n        if (parts.length >= 1) newData.full_name = parts[0].replace(/i'm|i am|my name is/i, \"\").trim();\r\n        if (parts.length >= 2) newData.nationality = parts[1].trim();\r\n        response = `Nice to meet you${newData.full_name ? `, ${newData.full_name}` : \"\"}! What are you currently studying or what did you last complete? (e.g., \"Finished BSc in Computer Science at MIT\")`;\r\n        setConversationStep(1);\r\n        break;\r\n      case 1: // Current education\r\n        if (userInput.toLowerCase().includes(\"bachelor\") || userInput.toLowerCase().includes(\"bsc\") || userInput.toLowerCase().includes(\"ba\")) {\r\n          newData.current_education_level = \"undergraduate\";\r\n        } else if (userInput.toLowerCase().includes(\"master\") || userInput.toLowerCase().includes(\"msc\") || userInput.toLowerCase().includes(\"ma\")) {\r\n          newData.current_education_level = \"graduate\";\r\n        } else if (userInput.toLowerCase().includes(\"phd\") || userInput.toLowerCase().includes(\"doctor\")) {\r\n          newData.current_education_level = \"professional\";\r\n        } else if (userInput.toLowerCase().includes(\"high school\") || userInput.toLowerCase().includes(\"secondary\")) {\r\n          newData.current_education_level = \"high_school\";\r\n        }\r\n        response = `Got it! So you're looking for a Master's, PhD, or another degree next? And which countries are you interested in studying in?`;\r\n        setConversationStep(2);\r\n        break;\r\n      case 2: // Target degree and countries\r\n        if (userInput.toLowerCase().includes(\"master\")) newData.target_degree = \"masters\";\r\n        else if (userInput.toLowerCase().includes(\"phd\") || userInput.toLowerCase().includes(\"doctor\")) newData.target_degree = \"phd\";\r\n        else if (userInput.toLowerCase().includes(\"bachelor\")) newData.target_degree = \"bachelor\";\r\n        else if (userInput.toLowerCase().includes(\"postdoc\")) newData.target_degree = \"postdoc\";\r\n        \r\n        const countries = [];\r\n        if (userInput.toLowerCase().includes(\"us\") || userInput.toLowerCase().includes(\"america\") || userInput.toLowerCase().includes(\"usa\")) countries.push(\"United States\");\r\n        if (userInput.toLowerCase().includes(\"uk\") || userInput.toLowerCase().includes(\"britain\") || userInput.toLowerCase().includes(\"england\")) countries.push(\"United Kingdom\");\r\n        if (userInput.toLowerCase().includes(\"canada\")) countries.push(\"Canada\");\r\n        if (userInput.toLowerCase().includes(\"germany\")) countries.push(\"Germany\");\r\n        if (userInput.toLowerCase().includes(\"australia\")) countries.push(\"Australia\");\r\n        newData.preferred_countries = countries;\r\n        \r\n        response = `Great choices! Quick question - what was your GPA (roughly)? And do you have any work experience?`;\r\n        setConversationStep(3);\r\n        break;\r\n      case 3: // GPA and work experience\r\n        const gpaMatch = userInput.match(/(\\d+\\.?\\d*)/);\r\n        if (gpaMatch) newData.gpa = parseFloat(gpaMatch[1]);\r\n        \r\n        const expMatch = userInput.match(/(\\d+)\\s*(year|month)/i);\r\n        if (expMatch) {\r\n          newData.work_experience_years = expMatch[2].toLowerCase() === \"month\" \r\n            ? Math.round(parseInt(expMatch[1]) / 12) \r\n            : parseInt(expMatch[1]);\r\n        }\r\n        \r\n        response = `Last thing - any special circumstances that might help your application? (First-generation student, financial need, disability, refugee status?)`;\r\n        setConversationStep(4);\r\n        break;\r\n      case 4: // Circumstances\r\n        newData.circumstances = {\r\n          financial_need: userInput.toLowerCase().includes(\"financial\") || userInput.toLowerCase().includes(\"aid\") || userInput.toLowerCase().includes(\"need\"),\r\n          first_gen: userInput.toLowerCase().includes(\"first\") || userInput.toLowerCase().includes(\"first-gen\") || userInput.toLowerCase().includes(\"first generation\"),\r\n          refugee: userInput.toLowerCase().includes(\"refugee\") || userInput.toLowerCase().includes(\"displaced\"),\r\n          disability: userInput.toLowerCase().includes(\"disability\") || userInput.toLowerCase().includes(\"disabled\"),\r\n        };\r\n        \r\n        response = `Perfect! I've got everything I need. Let me find the best scholarships for you...`;\r\n        setConversationStep(5);\r\n        \r\n        // Save and complete\r\n        setTimeout(() => saveProfile(newData), 1500);\r\n        break;\r\n      default:\r\n        response = \"Thanks! Processing your information...\";\r\n    }\r\n\r\n    setExtractedData(newData);\r\n    setMessages((prev) => [\r\n      ...prev,\r\n      { role: \"assistant\", content: response, timestamp: new Date().toISOString() },\r\n    ]);\r\n  };\r\n\r\n  const saveProfile = async (data: ExtractedData) => {\r\n    if (!user) return;\r\n\r\n    try {\r\n      // Use any to bypass type checking for new tables not yet in Database type\r\n      const client = supabase as unknown as {\r\n        from: (table: string) => {\r\n          update: (data: Record<string, unknown>) => {\r\n            eq: (column: string, value: string) => Promise<{ error: Error | null }>;\r\n          };\r\n        };\r\n      };\r\n\r\n      // Update user's full name if extracted\r\n      if (data.full_name) {\r\n        await client\r\n          .from(\"users\")\r\n          .update({ \r\n            full_name: data.full_name,\r\n            onboarding_complete: true \r\n          })\r\n          .eq(\"id\", user.id);\r\n      } else {\r\n        await client\r\n          .from(\"users\")\r\n          .update({ onboarding_complete: true })\r\n          .eq(\"id\", user.id);\r\n      }\r\n\r\n      // Update academic profile\r\n      await client\r\n        .from(\"academic_profiles\")\r\n        .update({\r\n          nationality: data.nationality,\r\n          country_of_residence: data.country_of_residence,\r\n          current_education_level: data.current_education_level,\r\n          current_institution: data.current_institution,\r\n          graduation_year: data.graduation_year,\r\n          gpa: data.gpa,\r\n          target_degree: data.target_degree,\r\n          target_fields: data.target_fields || [],\r\n          preferred_countries: data.preferred_countries || [],\r\n          work_experience_years: data.work_experience_years || 0,\r\n          languages: data.languages || [],\r\n          circumstances: data.circumstances || {},\r\n          profile_completeness: calculateCompleteness(data),\r\n          ai_extracted: true,\r\n        })\r\n        .eq(\"user_id\", user.id);\r\n\r\n      await refreshUser();\r\n      \r\n      // Redirect to eligibility check\r\n      setTimeout(() => {\r\n        router.push(\"/qualify?from=onboarding\");\r\n      }, 2000);\r\n    } catch (error) {\r\n      console.error(\"Error saving profile:\", error);\r\n    }\r\n  };\r\n\r\n  const calculateCompleteness = (data: ExtractedData): number => {\r\n    let score = 0;\r\n    if (data.nationality) score += 15;\r\n    if (data.current_education_level) score += 15;\r\n    if (data.target_degree) score += 15;\r\n    if (data.gpa) score += 10;\r\n    if (data.preferred_countries?.length) score += 10;\r\n    if (data.work_experience_years !== undefined) score += 10;\r\n    if (data.circumstances && Object.keys(data.circumstances).length > 0) score += 10;\r\n    if (data.target_fields?.length) score += 10;\r\n    if (data.full_name) score += 5;\r\n    return Math.min(100, score);\r\n  };\r\n\r\n  const handleKeyPress = (e: React.KeyboardEvent) => {\r\n    if (e.key === \"Enter\" && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSend();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-stone-50 flex flex-col\">\r\n      {/* Header */}\r\n      <header className=\"bg-white border-b border-stone-200 px-4 py-4\">\r\n        <div className=\"max-w-2xl mx-auto flex items-center gap-3\">\r\n          <div className=\"w-10 h-10 bg-gradient-to-br from-primary-500 to-accent-500 rounded-full flex items-center justify-center\">\r\n            <span className=\"text-white font-bold\">A</span>\r\n          </div>\r\n          <div>\r\n            <h1 className=\"font-semibold text-stone-900\">Ada</h1>\r\n            <p className=\"text-xs text-stone-500\">Your Scholarship Advisor</p>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* Chat Area */}\r\n      <div className=\"flex-1 overflow-y-auto px-4 py-6\">\r\n        <div className=\"max-w-2xl mx-auto space-y-4\">\r\n          <AnimatePresence mode=\"popLayout\">\r\n            {messages.map((message, index) => (\r\n              <motion.div\r\n                key={index}\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                exit={{ opacity: 0, y: -20 }}\r\n                className={`flex ${message.role === \"user\" ? \"justify-end\" : \"justify-start\"}`}\r\n              >\r\n                <div\r\n                  className={`max-w-[80%] rounded-2xl px-4 py-3 ${\r\n                    message.role === \"user\"\r\n                      ? \"bg-primary-500 text-white rounded-br-md\"\r\n                      : \"bg-white shadow-md shadow-stone-200/50 text-stone-900 rounded-bl-md\"\r\n                  }`}\r\n                >\r\n                  <p className=\"whitespace-pre-wrap\">{message.content}</p>\r\n                </div>\r\n              </motion.div>\r\n            ))}\r\n          </AnimatePresence>\r\n          \r\n          {loading && (\r\n            <motion.div\r\n              initial={{ opacity: 0 }}\r\n              animate={{ opacity: 1 }}\r\n              className=\"flex justify-start\"\r\n            >\r\n              <div className=\"bg-white shadow-md shadow-stone-200/50 rounded-2xl rounded-bl-md px-4 py-3\">\r\n                <div className=\"flex gap-1\">\r\n                  <span className=\"w-2 h-2 bg-stone-400 rounded-full animate-bounce\" style={{ animationDelay: \"0ms\" }}></span>\r\n                  <span className=\"w-2 h-2 bg-stone-400 rounded-full animate-bounce\" style={{ animationDelay: \"150ms\" }}></span>\r\n                  <span className=\"w-2 h-2 bg-stone-400 rounded-full animate-bounce\" style={{ animationDelay: \"300ms\" }}></span>\r\n                </div>\r\n              </div>\r\n            </motion.div>\r\n          )}\r\n          \r\n          <div ref={messagesEndRef} />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Input Area */}\r\n      <div className=\"bg-white border-t border-stone-200 px-4 py-4\">\r\n        <div className=\"max-w-2xl mx-auto\">\r\n          <div className=\"flex items-center gap-2\">\r\n            {/* Voice Button */}\r\n            {voiceSupported && (\r\n              <button\r\n                onClick={isListening ? stopListening : startListening}\r\n                className={`p-3 rounded-xl transition-all ${\r\n                  isListening\r\n                    ? \"bg-red-500 text-white animate-pulse\"\r\n                    : \"bg-stone-100 text-stone-600 hover:bg-stone-200\"\r\n                }`}\r\n              >\r\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\" />\r\n                </svg>\r\n              </button>\r\n            )}\r\n\r\n            {/* Text Input */}\r\n            <div className=\"flex-1 relative\">\r\n              <input\r\n                type=\"text\"\r\n                value={input}\r\n                onChange={(e) => setInput(e.target.value)}\r\n                onKeyPress={handleKeyPress}\r\n                placeholder={isListening ? \"Listening...\" : \"Type your message...\"}\r\n                disabled={loading || isListening}\r\n                className=\"w-full px-4 py-3 rounded-xl border-2 border-stone-200 focus:border-primary-500 focus:ring-0 transition-colors pr-12\"\r\n              />\r\n            </div>\r\n\r\n            {/* Send Button */}\r\n            <button\r\n              onClick={handleSend}\r\n              disabled={!input.trim() || loading}\r\n              className=\"p-3 rounded-xl bg-primary-500 text-white hover:bg-primary-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all\"\r\n            >\r\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\" />\r\n              </svg>\r\n            </button>\r\n          </div>\r\n          \r\n          <p className=\"text-xs text-stone-500 text-center mt-2\">\r\n            {voiceSupported ? \"Tap the microphone to speak, or type your response\" : \"Type your response and press Enter\"}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":["module","exports","require","vendored","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1,2,3,4,5,6]}