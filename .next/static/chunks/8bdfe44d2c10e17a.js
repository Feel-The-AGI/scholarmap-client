(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,99023,e=>{"use strict";e.i(87778);var t=e.i(19415),s=e.i(51576),l=e.i(32139),n=e.i(73407),a=e.i(92833),r=e.i(43030),i=e.i(51529),o=s,c=e.i(63272);function d(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class m extends o.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,s=(0,i.isHTMLElement)(e)&&e.offsetWidth||0,l=this.props.sizeRef.current;l.height=t.offsetHeight||0,l.width=t.offsetWidth||0,l.top=t.offsetTop,l.left=t.offsetLeft,l.right=s-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function x({children:e,isPresent:l,anchorX:n,root:a}){let r=(0,o.useId)(),i=(0,o.useRef)(null),x=(0,o.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=(0,o.useContext)(c.MotionConfigContext),u=function(...e){return s.useCallback(function(...e){return t=>{let s=!1,l=e.map(e=>{let l=d(e,t);return s||"function"!=typeof l||(s=!0),l});if(s)return()=>{for(let t=0;t<l.length;t++){let s=l[t];"function"==typeof s?s():d(e[t],null)}}}}(...e),e)}(i,e.props?.ref??e?.ref);return(0,o.useInsertionEffect)(()=>{let{width:e,height:t,top:s,left:o,right:c}=x.current;if(l||!i.current||!e||!t)return;let d="left"===n?`left: ${o}`:`right: ${c}`;i.current.dataset.motionPopId=r;let m=document.createElement("style");h&&(m.nonce=h);let u=a??document.head;return u.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${d}px !important;
            top: ${s}px !important;
          }
        `),()=>{u.contains(m)&&u.removeChild(m)}},[l]),(0,t.jsx)(m,{isPresent:l,childRef:i,sizeRef:x,children:o.cloneElement(e,{ref:u})})}let h=({children:e,initial:l,isPresent:a,onExitComplete:i,custom:o,presenceAffectsLayout:c,mode:d,anchorX:m,root:h})=>{let p=(0,n.useConstant)(u),f=(0,s.useId)(),g=!0,b=(0,s.useMemo)(()=>(g=!1,{id:f,initial:l,isPresent:a,custom:o,onExitComplete:e=>{for(let t of(p.set(e,!0),p.values()))if(!t)return;i&&i()},register:e=>(p.set(e,!1),()=>p.delete(e))}),[a,p,i]);return c&&g&&(b={...b}),(0,s.useMemo)(()=>{p.forEach((e,t)=>p.set(t,!1))},[a]),s.useEffect(()=>{a||p.size||!i||i()},[a]),"popLayout"===d&&(e=(0,t.jsx)(x,{isPresent:a,anchorX:m,root:h,children:e})),(0,t.jsx)(r.PresenceContext.Provider,{value:b,children:e})};function u(){return new Map}var p=e.i(89120);let f=e=>e.key||"";function g(e){let t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}let b=({children:e,custom:r,initial:i=!0,onExitComplete:o,presenceAffectsLayout:c=!0,mode:d="sync",propagate:m=!1,anchorX:x="left",root:u})=>{let[b,j]=(0,p.usePresence)(m),v=(0,s.useMemo)(()=>g(e),[e]),N=m&&!b?[]:v.map(f),y=(0,s.useRef)(!0),w=(0,s.useRef)(v),C=(0,n.useConstant)(()=>new Map),P=(0,s.useRef)(new Set),[S,E]=(0,s.useState)(v),[R,L]=(0,s.useState)(v);(0,a.useIsomorphicLayoutEffect)(()=>{y.current=!1,w.current=v;for(let e=0;e<R.length;e++){let t=f(R[e]);N.includes(t)?(C.delete(t),P.current.delete(t)):!0!==C.get(t)&&C.set(t,!1)}},[R,N.length,N.join("-")]);let _=[];if(v!==S){let e=[...v];for(let t=0;t<R.length;t++){let s=R[t],l=f(s);N.includes(l)||(e.splice(t,0,s),_.push(s))}return"wait"===d&&_.length&&(e=_),L(g(e)),E(v),null}let{forceRender:$}=(0,s.useContext)(l.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:R.map(e=>{let s=f(e),l=(!m||!!b)&&(v===R||N.includes(s));return(0,t.jsx)(h,{isPresent:l,initial:(!y.current||!!i)&&void 0,custom:r,presenceAffectsLayout:c,mode:d,root:u,onExitComplete:l?void 0:()=>{if(P.current.has(s)||(P.current.add(s),!C.has(s)))return;C.set(s,!0);let e=!0;C.forEach(t=>{t||(e=!1)}),e&&($?.(),L(w.current),m&&j?.(),o&&o())},anchorX:x,children:e},s)})})};e.s(["AnimatePresence",()=>b],99023)},72906,e=>{"use strict";var t=e.i(87778),s=e.i(19415),l=e.i(51576),n=e.i(78408),a=e.i(99023),r=e.i(7471);let i={bachelor:{icon:"ðŸŽ“",color:"text-blue-700",bg:"bg-blue-100"},masters:{icon:"ðŸ“š",color:"text-purple-700",bg:"bg-purple-100"},phd:{icon:"ðŸ”¬",color:"text-rose-700",bg:"bg-rose-100"},postdoc:{icon:"ðŸ†",color:"text-teal-700",bg:"bg-teal-100"}};function o(){let[e,o]=(0,l.useState)(null),[c,d]=(0,l.useState)(!0),[m,x]=(0,l.useState)(""),[h,u]=(0,l.useState)(""),[p,f]=(0,l.useState)(""),[g,b]=(0,l.useState)(""),[j,v]=(0,l.useState)(!1),[N,y]=(0,l.useState)(null),[w,C]=(0,l.useState)([]),[P,S]=(0,l.useState)([]),E=(0,r.createClient)();(0,l.useEffect)(()=>{(async()=>{let{data:e}=await E.auth.getUser();o(e.user?{email:e.user.email??""}:null),d(!1)})()},[]),(0,l.useEffect)(()=>{e&&R()},[e]);let R=async()=>{let[{data:e},{data:t}]=await Promise.all([E.from("programs").select("*").order("created_at",{ascending:!1}),E.from("agent_reviews").select("*").eq("resolved",!1).order("created_at",{ascending:!1})]);C(e??[]),S(t??[])},L=async e=>{e.preventDefault(),f("");let{error:t}=await E.auth.signInWithPassword({email:m,password:h});if(t)f(t.message);else{let{data:e}=await E.auth.getUser();o(e.user?{email:e.user.email??""}:null)}},_=async()=>{await E.auth.signOut(),o(null)},$=async e=>{e.preventDefault();let s=g.split("\n").map(e=>e.trim()).filter(e=>e.length>0);if(0!==s.length){v(!0),y(null);try{let e=await fetch(`${t.default.env.NEXT_PUBLIC_AGENT_URL||"https://scholarmap-agent.onrender.com"}/batch-ingest`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.default.env.NEXT_PUBLIC_AGENT_SECRET||"sm_agent_secret_2026_xK9mP3nQ7vL"}`},body:JSON.stringify({urls:s})}),l=await e.json();y(l),l.successful>0&&(b(""),R())}catch(e){y({total:s.length,successful:0,failed:s.length,results:s.map(t=>({url:t,success:!1,error:e.message}))})}v(!1)}},k=async e=>{await E.from("agent_reviews").update({resolved:!0}).eq("id",e),R()};return c?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 border-4 border-stone-200 border-t-primary-500 rounded-full animate-spin"}),(0,s.jsx)("p",{className:"text-stone-500",children:"Loading..."})]})}):e?(0,s.jsxs)("div",{className:"min-h-screen",children:[(0,s.jsx)("div",{className:"relative py-8 px-6 border-b border-stone-200 bg-white/50 backdrop-blur-xl",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-2xl bg-linear-to-tr from-stone-900 to-stone-800 flex items-center justify-center shadow-lg",children:(0,s.jsx)("span",{className:"text-xl",children:"âš¡"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl font-bold text-stone-900",children:"Agent Copilot"}),(0,s.jsx)("p",{className:"text-sm text-stone-500",children:"Scholarship Management Dashboard"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-stone-100",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-accent-500 animate-pulse"}),(0,s.jsx)("span",{className:"text-sm text-stone-600",children:e.email})]}),(0,s.jsx)("button",{onClick:_,className:"px-4 py-2 rounded-xl text-sm font-medium text-red-600 hover:bg-red-50 transition-colors",children:"Logout"})]})]})})}),(0,s.jsx)("div",{className:"px-6 py-8",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[{label:"Total Programs",value:w.length,icon:"ðŸ“Š",color:"from-blue-500 to-indigo-600"},{label:"Active",value:w.filter(e=>"active"===e.status).length,icon:"âœ…",color:"from-accent-500 to-teal-600"},{label:"Pending Review",value:P.length,icon:"âš ï¸",color:"from-amber-500 to-orange-600"},{label:"Paused",value:w.filter(e=>"paused"===e.status).length,icon:"â¸ï¸",color:"from-stone-500 to-stone-600"}].map(e=>(0,s.jsxs)(n.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-5 rounded-2xl bg-white border border-stone-200/80 shadow-lg shadow-stone-200/30",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("span",{className:"text-2xl",children:e.icon}),(0,s.jsx)("span",{className:`w-8 h-1 rounded-full bg-linear-to-r ${e.color}`})]}),(0,s.jsx)("div",{className:"text-3xl font-bold text-stone-900",children:e.value}),(0,s.jsx)("div",{className:"text-sm text-stone-500",children:e.label})]},e.label))}),(0,s.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,s.jsxs)("div",{className:"lg:col-span-1",children:[(0,s.jsxs)(n.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-6 rounded-3xl bg-linear-to-tr from-stone-900 to-stone-800 text-white",children:[(0,s.jsxs)("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xl",children:"ðŸ¤–"}),"Batch Ingest Scholarships"]}),(0,s.jsxs)("form",{onSubmit:$,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("textarea",{value:g,onChange:e=>b(e.target.value),placeholder:"Paste one URL per line... https://example.com/scholarship1 https://example.com/scholarship2 https://example.com/scholarship3",rows:5,className:"w-full px-4 py-3.5 rounded-xl bg-white/10 border border-white/20 text-white placeholder:text-stone-400 focus:border-white/40 focus:ring-2 focus:ring-white/10 outline-none transition-all resize-none font-mono text-sm"}),(0,s.jsxs)("p",{className:"text-xs text-stone-400 mt-2",children:[g.split("\n").filter(e=>e.trim()).length," URL(s) ready â€¢ Max 50 per batch"]})]}),(0,s.jsx)("button",{type:"submit",disabled:j||0===g.split("\n").filter(e=>e.trim()).length,className:"w-full px-6 py-3.5 rounded-xl bg-white text-stone-900 font-semibold hover:bg-stone-100 disabled:opacity-50 transition-all flex items-center justify-center gap-2",children:j?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"w-5 h-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[(0,s.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",className:"opacity-25"}),(0,s.jsx)("path",{fill:"currentColor",className:"opacity-75",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing ",g.split("\n").filter(e=>e.trim()).length," URLs..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Batch Ingest"]})})]}),(0,s.jsx)(a.AnimatePresence,{children:N&&(0,s.jsxs)(n.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 space-y-3",children:[(0,s.jsx)("div",{className:`p-4 rounded-xl ${0===N.failed?"bg-accent-500/20":0===N.successful?"bg-red-500/20":"bg-amber-500/20"}`,children:(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-2xl",children:0===N.failed?"ðŸŽ‰":0===N.successful?"âŒ":"âš¡"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-semibold",children:[N.successful,"/",N.total," Successful"]}),(0,s.jsxs)("p",{className:"text-xs text-stone-300",children:[N.total_time?.toFixed(1),"s total"]})]})]})})}),(0,s.jsx)("div",{className:"max-h-64 overflow-y-auto space-y-2",children:N.results.map((e,t)=>(0,s.jsx)("div",{className:`p-3 rounded-lg text-xs ${e.success?"bg-accent-500/10":"bg-red-500/10"}`,children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"truncate font-mono text-stone-300",title:e.url,children:e.url}),e.success?(0,s.jsxs)("p",{className:"text-accent-400 mt-1",children:["âœ“ ",((e.confidence??0)*100).toFixed(0),"% confidence â€¢ ",e.processing_time?.toFixed(1),"s"]}):(0,s.jsxs)("p",{className:"text-red-400 mt-1",children:["âœ— ",e.error]})]}),(0,s.jsx)("span",{className:`shrink-0 w-2 h-2 rounded-full mt-1.5 ${e.success?"bg-accent-500":"bg-red-500"}`})]})},t))})]})})]}),P.length>0&&(0,s.jsxs)(n.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mt-6 p-6 rounded-3xl bg-amber-50 border border-amber-200",children:[(0,s.jsxs)("h2",{className:"text-lg font-bold text-amber-800 mb-4 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xl",children:"âš ï¸"}),"Issues to Review (",P.length,")"]}),(0,s.jsx)("div",{className:"space-y-3",children:P.map(e=>(0,s.jsx)("div",{className:"p-4 rounded-xl bg-white border border-amber-200",children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("span",{className:`text-xs px-2 py-0.5 rounded-lg font-medium ${"high"===e.severity?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:e.severity}),(0,s.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-lg bg-stone-100 text-stone-600",children:e.issue_type})]}),(0,s.jsx)("p",{className:"text-sm text-stone-700",children:e.note})]}),(0,s.jsx)("button",{onClick:()=>k(e.id),className:"text-xs px-3 py-1.5 rounded-lg bg-accent-100 text-accent-700 hover:bg-accent-200 transition-colors font-medium",children:"Resolve"})]})},e.id))})]})]}),(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsxs)(n.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"p-6 rounded-3xl bg-white border border-stone-200/80 shadow-xl shadow-stone-200/30",children:[(0,s.jsxs)("h2",{className:"text-lg font-bold text-stone-900 mb-6 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xl",children:"ðŸ“š"}),"All Programs (",w.length,")"]}),0===w.length?(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)("div",{className:"text-5xl mb-4",children:"ðŸ“­"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-stone-900 mb-2",children:"No programs yet"}),(0,s.jsx)("p",{className:"text-stone-500",children:"Ingest a scholarship URL to get started"})]}):(0,s.jsx)("div",{className:"space-y-3",children:w.map(e=>{let t=i[e.level]||{icon:"ðŸ“„",color:"text-stone-700",bg:"bg-stone-100"};return(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-2xl bg-stone-50 border border-stone-100 hover:bg-stone-100 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("span",{className:"text-2xl",children:t.icon}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-stone-900",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-stone-500",children:[e.provider," Â· ",e.level]})]})]}),(0,s.jsx)("span",{className:`text-xs px-3 py-1.5 rounded-full font-medium ${"active"===e.status?"bg-accent-100 text-accent-700":"paused"===e.status?"bg-amber-100 text-amber-700":"bg-stone-100 text-stone-600"}`,children:e.status})]},e.id)})})]})})]})]})})]}):(0,s.jsxs)("div",{className:"min-h-screen flex items-center justify-center px-6",children:[(0,s.jsxs)("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 rounded-full bg-linear-to-tr from-primary-200/30 to-accent-200/20 blur-3xl"}),(0,s.jsx)("div",{className:"absolute bottom-1/4 right-1/4 w-64 h-64 rounded-full bg-linear-to-tr from-accent-200/30 to-primary-200/10 blur-3xl"})]}),(0,s.jsxs)(n.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative w-full max-w-md",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-linear-to-tr from-stone-900 to-stone-800 flex items-center justify-center mx-auto mb-4 shadow-xl",children:(0,s.jsx)("span",{className:"text-2xl",children:"ðŸ”"})}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-stone-900",children:"Admin Portal"}),(0,s.jsx)("p",{className:"text-stone-500 mt-1",children:"Sign in to manage scholarships"})]}),(0,s.jsxs)("form",{onSubmit:L,className:"p-8 rounded-3xl bg-white border border-stone-200/80 shadow-xl shadow-stone-200/30 space-y-5",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-stone-900 mb-2",children:"Email"}),(0,s.jsx)("input",{type:"email",value:m,onChange:e=>x(e.target.value),className:"w-full px-4 py-3.5 rounded-xl border-2 border-stone-200 bg-stone-50 focus:border-primary-500 focus:bg-white focus:ring-4 focus:ring-primary-100 outline-none transition-all text-stone-900 placeholder:text-stone-400",placeholder:"admin@scholarmap.com"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-stone-900 mb-2",children:"Password"}),(0,s.jsx)("input",{type:"password",value:h,onChange:e=>u(e.target.value),className:"w-full px-4 py-3.5 rounded-xl border-2 border-stone-200 bg-stone-50 focus:border-primary-500 focus:bg-white focus:ring-4 focus:ring-primary-100 outline-none transition-all text-stone-900 placeholder:text-stone-400",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})]}),(0,s.jsx)(a.AnimatePresence,{children:p&&(0,s.jsx)(n.motion.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-sm text-red-600 bg-red-50 px-4 py-3 rounded-xl",children:p})}),(0,s.jsx)("button",{type:"submit",className:"w-full px-6 py-4 rounded-xl bg-stone-900 text-white font-semibold hover:bg-stone-800 transition-colors",children:"Sign In"})]})]})]})}e.s(["default",()=>o])}]);